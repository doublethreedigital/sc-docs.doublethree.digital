<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>{{ title }} - Simple Commerce Documentation</title>
        <!-- <link href="https://fonts.googleapis.com/css?family=Exo&display=swap" rel="stylesheet"> -->
        <link rel="stylesheet" href="/css/site.css">
        <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>

        {{ if app:env === 'production' }}
            <!-- Fathom - beautiful, simple website analytics -->
            <script src="https://bear.duncanm.dev/script.js" site="TZWWDRQY" defer></script>
            <!-- / Fathom -->
        {{ /if }}

        <!-- Primary Meta Tags -->
        <meta name="title" content="{{ title }} - Simple Commerce Documentation">
        <meta name="description" content="{{ content | noparse | strip_tags | safe_truncate:200:... }}">

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:url" content="{{ current_url }}">
        <meta property="og:title" content="{{ title }} - Simple Commerce Documentation">
        <meta property="og:description" content="{{ content | noparse | strip_tags | safe_truncate:200:... }}">
        <meta property="og:image" content="{{ config:app:url }}/img/simple-commerce-banner.jpg">

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="{{ current_url }}">
        <meta property="twitter:title" content="{{ title }} - Simple Commerce Documentation">
        <meta property="twitter:description" content="{{ content | noparse | strip_tags | safe_truncate:200:... }}">
        <meta property="twitter:image" content="{{ config:app:url }}/img/simple-commerce-banner.jpg">

        <link rel="apple-touch-icon" sizes="180x180" href="/img/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/img/favicons/favicon-16x16.png">
        <link rel="shortcut icon" href="/img/favicons/favicon.ico">
        <meta name="theme-color" content="#041B34">
</head>
    <body>
        <div class="flex overflow-hidden h-screen">
            <aside class="max-w-xs font-sc">
                <div class="bg-sc-dark-blue text-white h-screen w-full">
                    <div class="flex flex-col justify-between min-h-full p-4">
                        <div>
                            <a href="/">
                                <img src="/img/simple-commerce.svg" alt="Simple Commerce" width="200px">
                            </a>
                        </div>

                        <div>
                            <h2 class="mb-4 font-bold text-lg">Documentation</h2>
                            <nav class="flex flex-col">
                                {{ nav:pages }}
                                    {{ if is_current }}
                                        <div class="mb-2">
                                            <span class="mb-2 block font-medium">{{ title }}</span>
                                            <div class="pl-4 flex flex-col">
                                                {{ content | noparse | toc }}

                                                <!-- <a class="mb-1 font-medium" href="#">Limitations</a>
                                                <a class="mb-1" href="#">How it works</a>
                                                <a class="mb-1" href="#">Licensing</a> -->
                                            </div>
                                        </div>
                                    {{ else }}
                                        <a class="mb-1" href="{{ url }}">{{ title }}</a>
                                    {{ /if }}
                                {{ /nav:pages }}
                            </nav>
                        </div>

                        <div>
                            <p class="text-xs">Built by <a class="underline" href="https://doublethree.digital">Double Three Digital</a>, <br> Copyright {{ now format="Y" }}.</p>
                        </div>
                    </div>
                </div>
            </aside>
            <div class="w-0 flex-1 overflow-y-scroll">
                <div class="w-full px-6 md:px-0 md:w-3/4 lg:w-1/2 mx-auto my-8">
                    <header class="w-full mb-12">
                        <div class="w-full flex items-center">
                            <form class="w-full" action="{{ site:url }}/search">
                                <input type="text" name="q" placeholder="Search Documentation" class="bg-gray-200 focus:bg-gray-300 px-4 py-2 text-sm focus:outline-none rounded w-full font-medium font-sc" value="{{ get:q }}">
                                <input type="submit" hidden />
                            </form>

                            <div class="px-4">
                                <div x-data="{ versionDropdown: false, version: 'v2.1' }" x-cloak class="relative inline-block text-left" @click.away="versionDropdown = false">
                                    <div>
                                        <span class="rounded-md shadow-sm">
                                            <button type="button"
                                                class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150"
                                                aria-haspopup="true"
                                                aria-expanded="true"
                                                @click="versionDropdown = !versionDropdown"
                                            >
                                                Version
                                                <svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                </svg>
                                            </button>
                                        </span>
                                    </div>

                                    <!--
                                    Dropdown panel, show/hide based on dropdown state.

                                    Entering: "transition ease-out duration-100"
                                      From: "transform opacity-0 scale-95"
                                      To: "transform opacity-100 scale-100"
                                    Leaving: "transition ease-in duration-75"
                                      From: "transform opacity-100 scale-100"
                                      To: "transform opacity-0 scale-95"
                                  -->
                                    <div
                                        x-show="versionDropdown"
                                        :class="{ 'transition ease-out duration-100' : versionDropdown, 'transition ease-in duration-75' : !versionDropdown }"
                                        class="origin-top-right absolute right-0 mt-2 w-40 rounded-md shadow-lg"
                                    >
                                        <div class="rounded-md bg-white shadow-xs">
                                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">
                                                <a href="/v2.1" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" role="menuitem">v2.1 (Latest)</a>
                                                <a href="/v2.0" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" role="menuitem">v2.0</a>
                                                <a href="https://github.com/doublethreedigital/simple-commerce/tree/v1.0-dev/docs" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900"role="menuitem">v1.0</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                    <div class="w-full">
                        {{ template_content }}
                    </div>
                </div>
            </div>
        </div>

        <script src="/js/site.js"></script>
        <script>
            // Table of Contents
            document.addEventListener('scroll', function () {
                let tocItems = Array.from(document.getElementsByClassName('toc')[0].children).map((child) => {
                    return document.getElementById(child.children[0].id.replace('anchor-', ''))
                })
            })
        </script>
    </body>
</html>
